<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Register form</title>

    <!-- update the version number as needed -->
    <script defer src="/__/firebase/4.13.0/firebase-app.js"></script>
    <!-- include only the Firebase features as you need -->
    <script defer src="/__/firebase/4.13.0/firebase-auth.js"></script>
    <script defer src="/__/firebase/4.13.0/firebase-database.js"></script>
    <script defer src="/__/firebase/4.13.0/firebase-messaging.js"></script>
    <script defer src="/__/firebase/4.13.0/firebase-storage.js"></script>
    <!-- initialize the SDK after all desired features are loaded -->
    <script defer src="/__/firebase/init.js"></script>
	
	
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	<link rel="stylesheet" type="text/css" media="screen" href="styles/style.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="styles/registration.css" />
	<script type="text/javascript" src="JS/registration.js"></script>
	<script type="text/javascript" src="JS/common.js"></script>

	<script src="https://www.gstatic.com/firebasejs/4.13.0/firebase.js"></script>
	<script type="text/javascript" src="FirebaseInitialScript.js"></script>
  </head>
  
<body>

	<form class="form-horizontal">
		<fieldset>

		<!-- Form Name -->
		<legend>Form Name</legend>

		<!-- Text input-->
		<div class="form-group">
		  <label class="col-sm-4 control-label" for="fname">First Name</label>  
		  <div class="col-sm-4">
		  <input id="fname" name="fname" type="text" placeholder="placeholder" class="form-control input-sm" required="">
		  <span class="help-block" id="invalid_fname">Type letters of first name only</span>  
		  </div>
		</div>

		<!-- Text input-->
		<div class="form-group">
		  <label class="col-sm-4 control-label" for="Last Name">Last Name</label>  
		  <div class="col-sm-4">
		  <input id="lname" name="Last Name" type="text" placeholder="placeholder" class="form-control input-sm" required="">
		  <span class="help-block" id="invalid_lname">Type letters of last name only</span>  
		  </div>
		</div>

		<!-- Multiple Checkboxes (inline) -->
		<div class="form-group">
		  <label class="col-sm-4 control-label" for="_Gender">Gender</label>
		  <div class="col-sm-4">
			<label class="checkbox-inline" for="_Gender-0">
			  <input type="checkbox" name="_Gender" id="_Gender-0" value="male">
			  Male
			</label>
			<label class="checkbox-inline" for="_Gender-1">
			  <input type="checkbox" name="_Gender" id="_Gender-1" value="female">
			  Female
			</label>
		  </div>
		</div>

		<!-- Text input-->
		<div class="form-group">
		  <label class="col-sm-4 control-label" for="textinput">Email</label>  
		  <div class="col-sm-4">
		  <input id="emailAd" name="EmailAddress" type="text" placeholder="your_email@host.domain" class="form-control input-sm" required="">
		  <span class="help-block" id="invalid_email">help</span>  
		  </div>
		</div>

		<!-- Text input-->
		<div class="form-group">
		  <label class="col-sm-4 control-label" for="textinput">Username</label>  
		  <div class="col-sm-4">
		  <input id="user" name="username" type="text" placeholder="yves-st-laurent" class="form-control input-sm" required="">
		  <span class="help-block" id="invalid_username">help</span>  
		  </div>
		</div>

		<!-- Password input-->
		<div class="form-group">
		  <label class="col-sm-4 control-label" for="Password">Password</label>
		  <div class="col-sm-4">
			<input id="Password1" name="Password" type="password" placeholder="Minimum six aLph@ num3rs" class="form-control input-sm" required="">
			<span class="help-block" id="invalid_pass1">help</span>
		  </div>
		</div>

		<!-- Password input-->
		<div class="form-group">
		  <label class="col-sm-4 control-label" for="passwordinput">Password </label>
		  <div class="col-sm-4">
			<input id="Password2" name="Password" type="password" placeholder="Type password again" class="form-control input-sm" required="">
			<span class="help-block" id="invalid_pass2">help</span>
		  </div>
		</div>

		<!-- File Button --> 
		<div class="form-group">
		  <label class="col-sm-4 control-label" for="Profile Picture">File Button</label>
		  <div class="col-sm-4">
			<input id="Profile Picture" name="Profile Picture" class="input-file" type="file">
		  </div>
		</div>

		<!-- Text input-->
		<div class="form-group">
		  <label class="col-sm-4 control-label" for="towncity">City/Town</label>  
		  <div class="col-sm-4">
		  <input id="towncity" name="towncity" type="text" placeholder="Burnaby" class="form-control input-sm" required="">
		  <span class="help-block" id="invalid_loc1">Type in city/town</span>  
		  </div>
		</div>

		<!-- Text input-->
		<div class="form-group">
		  <label class="col-sm-4 control-label" for="country">Country</label>  
		  <div class="col-sm-4">
		  <input id="country" name="country" type="text" placeholder="Canada" class="form-control input-sm" required="">
		  <span class="help-block" id="invalid_loc2">Type in country</span>  
		  </div>
		</div>

		<br>
		</fieldset>
</form>

		<button id="signup" onclick="">Submit</button>
		<button id="cancel" onclick="moveToIndex()">Cancel</button>

</body>
<script>
	$("span").hide();
    
	$("input[type=text]").attr( {
		maxlength : 20
    }); 

    //Sorted by class name of names! -or- A-Za-z
    $("#fname").keyup( function() {
        if (!(/^[A-Za-z]+$/.test(this.value)))
			$("#invalid_fname").show();
		$("#invalid_fname").hide();
    });
    
    $("#lname").keyup( function() {
        if (!(/^[A-Za-z]+$/.test(this.value)))
			$("#invalid_lname").show();
		$("#invalid_lname").hide();
    });

	
    //Email Regex
    $("#emailAd").keyup( function() {
	    var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
        var valid = re.test(this.value);
        if(valid) 
			$("#invalid_email").show();
		$("#invalid_email").hide();
    });

    //Auto geolocation. Requires permission. Pick this because SSL is required, which Google has
    //verify geo location https://developer.mozilla.org/en-US/docs/Web/API/Geolocation/getCurrentPosition
	$("#towncity").click(()=> {
		$.getJSON('https://ipinfo.io/json', function(json) {
			alert(JSON.stringify(json));
			$("#towncity").val(json.city);
			$("#country").val(json.country);
		});
	});
	
	$("#Password1, #Password2").keyup( function() {
		function checkPasswordsNow() {
			if( !$("#Password1").val() && !$("#Password2").val() ) {
				alert("Type passwords to both fields");
			}		
			else if($("#Password1").val() != $("#Password2").val()) {
				alert("Passwords must be same");
			}
		}
		setTimeout(checkPasswordsNow,3000);
		/*Add password strength validation?*/
	});


</script>
</html>